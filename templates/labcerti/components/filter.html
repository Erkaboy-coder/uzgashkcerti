<div class="card mb-4">
    <div class="card-header">
        <i class="fas fa-search me-1"></i>Qidiruv
    </div>
    <div class="card-body">
        <form id="searchForm" class="row g-2 align-items-end" method="get"
              action="{% if request.user.userprofile.role == 'creator' %}{% url 'creator:dashboard' %}{% elif request.user.userprofile.role == 'administrator' %}{% url 'administrator:dashboard' %}{% else %}{% url 'approver:dashboard' %}{% endif %}">

            <!-- 1-qator: 4 ta maydon -->
            <div class="col-md-3">
                <label class="form-label small">Guvohnoma raqami</label>
                <input type="text" class="form-control form-control-sm"
                       name="certificate_number" value="{{ request.GET.certificate_number }}"
                       placeholder="Masalan: 12345">
            </div>

            <div class="col-md-3">
                <label class="form-label small">Kimga tegishli INNsi</label>
                <input type="text" class="form-control form-control-sm"
                       name="owner_inn" value="{{ request.GET.owner_inn }}"
                       placeholder="Masalan: 123456789">
            </div>

            <div class="col-md-3">
                <label class="form-label small">Oâ€˜lchash vositasi nomi</label>
                <input type="text" class="form-control form-control-sm"
                       name="device_name" value="{{ request.GET.device_name }}"
                       placeholder="Masalan: Termometr">
            </div>

            <div class="col-md-3">
                <label class="form-label small">Zavod raqami</label>
                <input type="text" class="form-control form-control-sm"
                       name="device_serial" value="{{ request.GET.device_serial }}"
                       placeholder="Masalan: SN12345">
            </div>

            <!-- 2-qator: holati, qiyoslash sanasi, to_date, checkbox va tugmalar -->
            <div class="col-md-3">
                <label class="form-label small">Holati</label>
                <select class="form-select form-select-sm" name="status">
                    <option value="">-- Barchasi --</option>
                    {% if request.user.userprofile.role == "creator" %}
                        <option value="draft" {% if current_status == 'draft' %}selected{% endif %}>Qoralamalar</option>
                    {% endif %}
                    <option value="pending" {% if current_status == 'pending' %}selected{% endif %}>Tasdiqlashdagilar</option>
                    <option value="approved" {% if current_status == 'approved' %}selected{% endif %}>Tasdiqlangan</option>
                    <option value="rejected" {% if current_status == 'rejected' %}selected{% endif %}>Rad etilgan</option>
                </select>
            </div>

            <div class="col-md-3">
                <label class="form-label small">Qiyoslash sanasi</label>
                <input type="date" class="form-control form-control-sm" name="from_date"
                       value="{{ request.GET.from_date }}">
            </div>

            <div class="col-md-3" id="toDateInputContainer" style="display: {% if request.GET.to_date %}block{% else %}none{% endif %};">
                <label class="form-label small">gacha</label>
                <input type="date" class="form-control form-control-sm" name="to_date"
                       value="{{ request.GET.to_date }}">
            </div>

            <div class="col-md-3 d-flex align-items-center">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="dateRangeCheckbox" name="date_range_enabled"
                           {% if request.GET.to_date %}checked{% endif %}>
                    <label class="form-check-label small" for="dateRangeCheckbox">
                        Oraliqda qidirish
                    </label>
                </div>
            </div>

{#            {% if request.user.userprofile.role == 'administrator' %}#}
{#                <!-- 3-qator: xodim bo'yicha filter -->#}
{#                <div class="col-md-3">#}
{#                    <label class="form-label small">Xodim</label>#}
{#                    <select class="form-select form-select-sm" name="employee">#}
{#                        <option value="">-- Barchasi --</option>#}
{#                        {% for emp in employees %}#}
{#                            <option value="{{ emp.id }}" {% if request.GET.employee == emp.id|stringformat:"s" %}selected{% endif %}>{{ emp.user.username }} ({{ emp.role }})</option>#}
{#                        {% endfor %}#}
{#                    </select>#}
{#                </div>#}
{#            {% endif %}#}

            <!-- Tugmalar har doim oxirida -->
            <div class="col-12 d-flex gap-2 mt-2">
                <button type="submit" class="btn btn-primary btn-sm"><i class="fas fa-search me-1"></i>Qidirish</button>
                <a href="{% if request.user.userprofile.role == 'creator' %}{% url 'creator:dashboard' %}{% elif request.user.userprofile.role == 'administrator' %}{% url 'administrator:dashboard' %}{% else %}{% url 'approver:dashboard' %}{% endif %}"
                   class="btn btn-secondary btn-sm"><i class="fas fa-undo me-1"></i>Tozalash</a>
            </div>

        </form>
    </div>
</div>
