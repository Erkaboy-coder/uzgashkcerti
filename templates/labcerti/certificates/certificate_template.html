<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>Guvohnoma</title>
    <style>
        @page {
            size: A4;
            margin: 15mm;
        }

        @font-face {
            font-family: 'Roboto';
            src: url('{{ font_url }}');
        }

        /* DEBUG rejimida chizilayotgan ramkalarni CSS orqali ko‘rimsiz qilishga ham urinib ko‘ramiz */
        html, body, div, p, h1, h2, h3, h4, h5, h6, table, tr, td, span, img {
            border: 0 !important;
            outline: none !important;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            color: #000;
            /* Fon rasmini bevosita body'ga qo'yamiz */
            background-image: url('{{ bg_url }}');
            background-repeat: repeat;
            background-position: 0 0;
        }

        /* Chegara uchun TABLE ishlatamiz – xhtml2pdf bunda eng barqaror */
        .page-wrap {
            width: 100%;
            border-collapse: collapse;
        }
        .page-wrap td {
            padding: 0;
            vertical-align: top;
        }
        .page-border {
            border: 3px solid #000; /* faqat bitta umumiy border */
            padding: 15mm;
            box-sizing: border-box;
        }

        .header-section { text-align:center; margin-bottom:10px; }
        .header-section h3 { font-size:14px; font-weight:bold; color:#00008b; margin:0; }
        .header-section h5 {
            font-size:12px; font-weight:bold;
            border-bottom:1px solid #000; margin:5px 0 2px; padding-bottom:2px;
        }
        .header-section i { font-size:9px; color:#555; font-style:italic; }

        .title-section { text-align:center; margin:10px 0; }
        .title-section p { font-size:14px; font-weight:bold; margin:0; }
        .title-section h2 { font-size:18px; margin:3px 0; }
        .title-section h1 { font-size:24px; color:#00008b; margin:3px 0; font-weight:bold; }

        .validity-section { text-align:right; font-size:12px; margin:10px 0; }

        .details-section { font-size:12px; margin-bottom:10px; }
        .detail-item { margin-bottom:8px; text-align:center; }
        .detail-item p { margin:0; }
        .underline-text { border-bottom:1px solid #000; padding:0 10px 2px 10px; }
        .detail-item i { font-size:9px; color:#777; }

        .signature-section { margin-top:20px; display:table; width:100%; }
        .qr-box, .signature-details { display:table-cell; vertical-align:bottom; width:50%; }
        .qr-box img { width:70px; height:70px; }
        .signature-details { text-align:right; font-size:12px; }
        .signature-details p { margin:3px 0; }

        .warning-section { text-align:center; font-size:10px; color:#d9534f; font-weight:bold; margin-top:15px; }
    </style>
</head>
<body>
<table class="page-wrap">
    <tr>
        <td class="page-border">
            <div class="header-section">
                <h3>O‘ZBEKISTON RESPUBLIKASIDA O‘LCHASHLARNING YAGONA BIRLIKDA BO'LISHINI TA’MINLASH TIZIMI</h3>
                <h5>{{ cert.service_provider_name }}</h5>
                <i>(o'lchash vositasini qiyoslashni o'tkazgan metrologiya xizmatining nomi)</i>
            </div>

            <div class="title-section">
                <p>{{ cert.certificate_number }}-son</p>
                <h2>O‘lchash vositasini qiyoslash</h2>
                <h1>GUVOHNOMASI</h1>
            </div>

            <div class="validity-section">
                <p>Amal qilish muddati: <br>
                    <strong>{{ cert.valid_until_date|date:"Y" }}-yil {{ cert.valid_until_date|date:"d" }}-{{ cert.valid_until_date|date:"F" }} gacha</strong>
                </p>
            </div>

            <div class="details-section">
                <div class="detail-item">
                    <p>Ushbu guvohnoma <span class="underline-text">{{ cert.standards_used }}</span> foydalangan holda</p>
                    <i>(etalonlar va qiyoslangan sanasi)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.comparison_document }}</span> ga muvofiq</p>
                    <i>(qiyoslash bo‘yicha hujjat)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.service_provider_name }}</span> tomonidan qiyoslangan</p>
                    <i>(metrologiya xizmati nomi)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.owner_name }}</span> ga tegishli</p>
                    <i>(egasi - yuridik shaxs)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.manufacturer }}</span> tomonidan tayyorlangan</p>
                    <i>(tayyorlovchi)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.origin_country }}</span> dan import qilingan</p>
                    <i>(mamlakat)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.measurement_range }}</span></p>
                    <i>(o‘lchash parametrlari)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.error_limit }}</span> metrologik tavsifli</p>
                    <i>(xatolik chegarasi)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.device_name }} {{ cert.device_serial_numbers }}</span> o‘lchash vositasi</p>
                    <i>(nomlanishi, zavod raqami)</i>
                </div>

                <div class="detail-item">
                    <p><span class="underline-text">{{ cert.comparison_methodology_doc }}</span> talablariga mosligini tasdiqlaydi</p>
                    <i>(normativ hujjat)</i>
                </div>
            </div>

            <div class="signature-section">
                <div class="qr-box">
                    <img src="{{ qr_url }}" alt="QR Code">
                </div>
                <div class="signature-details">
                    <p>Qiyoslash sanasi: <strong>{{ cert.comparison_date|date:"Y" }}-yil {{ cert.comparison_date|date:"d" }}-{{ cert.comparison_date|date:"F" }}</strong></p>
                    <p>Qiyoslovchi: <strong>{{ cert.metrologist }}</strong></p>
                    <i>(F.I.SH.)</i>
                </div>
            </div>

            <div class="warning-section">
                <i>Mazkur guvohnomani qalbakilashtirish - qonunga muvofiq javobgarlikka tortiladi.</i>
            </div>
        </td>
    </tr>
</table>
</body>
</html>
